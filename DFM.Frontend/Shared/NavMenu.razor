@inject LocalStorageHelper storageHelper
<MudNavMenu>
    <div class="@(IsOpen?"d-flex justify-content-end":"d-flex justify-content-center")">
        <MudIconButton Icon="@Icons.Material.Outlined.Menu" Color="Color.Primary" OnClick="Open" Size="Size.Medium" />
    </div>

    <MudDivider Class="mb-4" Style="height:2px" />

    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/home") || ValidateRule.isInRole(rules!, "/pages/personal/account"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ສ່ວນຕົວ</MudText>
        }

    }
    @if (ValidateRule.isInRole(rules!, "/pages/home"))
    {
        <MudNavLink Href="/pages/home" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Home">ຫນ້າຫລັກ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/personal/account"))
    {
        <MudNavLink Href="/pages/personal/account" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Person">ຂໍ້ມູນຜູ້ໃຊ້</MudNavLink>
    }
    <MudDivider Style="height:2px" />
    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/inbox/none") || ValidateRule.isInRole(rules!, "/pages/doc/inbound/coprocess/none") ||
        ValidateRule.isInRole(rules!, "/pages/doc/inbound/draft/none") || ValidateRule.isInRole(rules!, "/pages/doc/inbound/completed/none") ||
        ValidateRule.isInRole(rules!, "/pages/doc/inbound/bin/none"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ເອກະສານຂາເຂົ້າ</MudText>
        }
        
    }

    @if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/inbox/none"))
    {
        <MudNavLink Href="/pages/doc/inbound/inbox/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.MoveToInbox" Match="NavLinkMatch.Prefix">ອິນບ໋ອກ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/coprocess/none"))
    {
        <MudNavLink Href="/pages/doc/inbound/coprocess/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.ClosedCaptionOff" Match="NavLinkMatch.Prefix">ຕິດຕາມ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/draft/none"))
    {
        <MudNavLink Href="/pages/doc/inbound/draft/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Drafts" Match="NavLinkMatch.Prefix">ສະບັບຮ່າງ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/completed/none"))
    {
        <MudNavLink Href="/pages/doc/inbound/completed/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.LibraryAddCheck" Match="NavLinkMatch.Prefix">ສຳເລັດແລ້ວ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/inbound/bin/none"))
    {
        <MudNavLink Href="/pages/doc/inbound/bin/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Delete" Match="NavLinkMatch.Prefix">ຖັງຂີ້ເຫຍື່ອ</MudNavLink>

    }
    <MudDivider Style="height:2px" />
    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/inbox/none") || ValidateRule.isInRole(rules!, "/pages/doc/outbound/coprocess/none") ||
        ValidateRule.isInRole(rules!, "/pages/doc/outbound/draft/none") || ValidateRule.isInRole(rules!, "/pages/doc/outbound/completed/none") ||
        ValidateRule.isInRole(rules!, "/pages/doc/outbound/bin/none"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ເອກະສານຂາອອກ</MudText>
        }
        
    }

    @if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/inbox/none"))
    {
        <MudNavLink Href="/pages/doc/outbound/inbox/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.ForwardToInbox" Match="NavLinkMatch.Prefix">ເອກະສານສົ່ງອອກ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/coprocess/none"))
    {
        <MudNavLink Href="/pages/doc/outbound/coprocess/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.ClosedCaptionOff" Match="NavLinkMatch.Prefix">ຕິດຕາມ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/draft/none"))
    {
    <MudNavLink Href="/pages/doc/outbound/draft/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Drafts" Match="NavLinkMatch.Prefix">ສະບັບຮ່າງ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/completed/none"))
    {
        <MudNavLink Href="/pages/doc/outbound/completed/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.LibraryAddCheck" Match="NavLinkMatch.Prefix">ສຳເລັດແລ້ວ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/doc/outbound/bin/none"))
    {
        <MudNavLink Href="/pages/doc/outbound/bin/none" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Delete" Match="NavLinkMatch.Prefix">ຖັງຂີ້ເຫຍື່ອ</MudNavLink>

    }
    <MudDivider Style="height:2px" />


    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/monitor/inbound") || ValidateRule.isInRole(rules!, "/pages/monitor/outbound"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ລາຍງານສຳລັບແອັດມິນ</MudText>
        }
        
    }

    @if (ValidateRule.isInRole(rules!, "/pages/monitor/inbound"))
    {
        <MudNavLink Href="/pages/monitor/inbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.AdminPanelSettings">ເອກະສານຂາເຂົ້າ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/monitor/outbound"))
    {
        <MudNavLink Href="/pages/monitor/outbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.AdminPanelSettings">ເອກະສານຂາອອກ</MudNavLink>
    }
    <MudDivider Style="height:2px" />

    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/monitor/inbound") || ValidateRule.isInRole(rules!, "/pages/monitor/outbound"))
        {
             <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ແຟ້ມເອກະສານ</MudText>
        }
       
    }

    @if (ValidateRule.isInRole(rules!, "/pages/folder/inbound"))
    {
        <MudNavLink Href="/pages/folder/inbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Folder">ແຟ້ມຂາເຂົ້າ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/folder/outbound"))
    {
        <MudNavLink Href="/pages/folder/outbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.FolderShared">ແຟ້ມຂາອອກ</MudNavLink>
    }
    
    
    <MudDivider Style="height:2px" />
    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/org/chart") || ValidateRule.isInRole(rules!, "/pages/org/user") ||
        ValidateRule.isInRole(rules!, "/pages/doctype") || ValidateRule.isInRole(rules!, "/pages/security") ||
        ValidateRule.isInRole(rules!, "/pages/urgent") || ValidateRule.isInRole(rules!, "/pages/rulemanager"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ຈັດການຂໍ້ມູນພື້ນຖານ</MudText>
        }
        
    }

    @if (ValidateRule.isInRole(rules!, "/pages/org/chart"))
    {
        <MudNavLink Href="/pages/org/chart" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.AddChart">ແຜນວາດອົງກອນ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/org/user"))
    {
        <MudNavLink Href="/pages/org/user" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.SupervisedUserCircle">ຜູ້ໃຊ້ລະບົບ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/doctype"))
    {
        <MudNavLink Href="/pages/doctype" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Assessment">ປະເພດເອກະສານ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/security"))
    {
        <MudNavLink Href="/pages/security" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Security">ລະດັບຄວາມປອດໄພເອກະສານ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/urgent"))
    {
        <MudNavLink Href="/pages/urgent" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.NoiseAware">ລະດັບຄວາມເລັ່ງດ່ວນ</MudNavLink>
    }
    @if (ValidateRule.isInRole(rules!, "/pages/rulemanager"))
    {
        <MudNavLink Href="/pages/rulemanager" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.RuleFolder">ກຳໜົດສິດຂອງຜູ້ໃຊ້</MudNavLink>
    }
    
    
    <MudDivider Style="height:2px" />
    @if (IsOpen)
    {
        if (ValidateRule.isInRole(rules!, "/pages/report/inbound") || ValidateRule.isInRole(rules!, "/pages/report/outbound"))
        {
            <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ລາຍງານ</MudText>
        }
        
    }

    @if (ValidateRule.isInRole(rules!, "/pages/report/inbound"))
    {
        <MudNavLink Href="/pages/report/inbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Newspaper">ລາຍງານເອກະສານຂາເຂົ້າ</MudNavLink>

    }
    @if (ValidateRule.isInRole(rules!, "/pages/report/outbound"))
    {
        <MudNavLink Href="/pages/report/outbound" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Newspaper">ລາຍງານເອກະສານຂາອອກ</MudNavLink>

    }
    <MudDivider Style="height:2px" />
    @if (IsOpen)
    {
        <MudText Typo="Typo.subtitle2" Color="Color.Primary" Style="font-weight: bold; font-size: 16px;" Class="ml-4 my-3">ລະບົບ</MudText>
    }

    <MudNavLink Href="/authorize" IconColor="Color.Primary" Style="color: #002f57" Icon="@Icons.Material.Outlined.Logout">ອອກຈາກລະບົບ</MudNavLink>
    <MudDivider Style="height:5px" />
</MudNavMenu>

@code {
    IEnumerable<RuleMenu>? rules;

    protected override async Task OnInitializedAsync()
    {
        rules = await storageHelper.GetRuleMenuAsync();
        
    }
}