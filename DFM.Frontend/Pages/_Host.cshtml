@page "/"
@namespace DFM.Frontend.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<component type="typeof(App)" render-mode="Server" />

<script>
    // Wait until a reload button appears
    new MutationObserver((mutations, observer) => {
        if (document.querySelector(&#039;#components-reconnect-modal h5 a&#039;)) {
            // Now every 10 seconds, see if the server appears to be back, and if so, reload
            async function attemptReload() {
                await fetch(''); // Check the server really is back
                location.reload();
            }
            observer.disconnect();
            attemptReload();
            setInterval(attemptReload, 2000);
        }
    }).observe(document.body, { childList: true, subtree: true });
</script>
